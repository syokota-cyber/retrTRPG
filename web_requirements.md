# Web版要件定義書 - 中世商会戦記 SRPG

## 1. システム概要

### 1.1 プロダクト概要
- **名称**: 中世商会戦記 SRPG (Web版)
- **プラットフォーム**: Webブラウザ
- **ジャンル**: ボードゲーム風タクティカルSRPG
- **想定プレイ時間**: 1ステージ 15-30分

### 1.2 ユーザー要件
- **ターゲット**: レトロゲーム愛好家、SRPG・ボードゲームファン
- **年齢層**: 20-40代
- **プレイ環境**: PC/タブレット (スマートフォンは補助的対応)

## 2. 機能要件

### 2.1 ゲーム画面要件

#### 2.1.1 タイトル画面
- ゲームロゴ表示
- スタートボタン
- 復活の呪文入力
- 設定メニュー

#### 2.1.2 メインゲーム画面
- **ボードマップ表示**
  - 10x10のマス目グリッド
  - 地形による色分け表示
  - 店舗アイコン表示
- **キャラクター表示**
  - プレイヤーコマ (ドット絵)
  - 移動アニメーション
- **UI要素**
  - サイコロボタン
  - ステータス表示 (資金、レベル、HP)
  - メニューボタン

#### 2.1.3 商談バトル画面
- コマンド選択UI
- ターン表示
- ダメージエフェクト
- 結果表示

### 2.2 ゲームプレイ要件

#### 2.2.1 基本フロー
1. サイコロを振る
2. 出た目の数だけマス移動
3. 止まったマスでイベント発生
4. 商談バトル or アイテム購入
5. ゴールまで繰り返し

#### 2.2.2 セーブ/ロード
- ブラウザLocalStorage使用
- 復活の呪文による再開機能
- オートセーブ (ターン終了時)

### 2.3 非機能要件

#### 2.3.1 パフォーマンス
- ページロード: 5秒以内
- 操作レスポンス: 100ms以内
- アニメーション: 60fps

#### 2.3.2 ユーザビリティ
- キーボード操作対応
- マウス/タッチ操作対応
- ツールチップによる説明表示

#### 2.3.3 アクセシビリティ
- 色覚多様性対応 (形状による区別)
- フォントサイズ調整可能
- 効果音ON/OFF

## 3. 画面仕様

### 3.1 レイアウト構成
```
┌──────────────────────────────────┐
│  ヘッダー (ステータス表示)           │
├────────┬─────────────────────────┤
│        │                         │
│ サイド │   メインボード           │
│ メニュー│   (10x10グリッド)       │
│        │                         │
├────────┴─────────────────────────┤
│  アクションパネル (サイコロ等)       │
└──────────────────────────────────┘
```

### 3.2 カラーパレット
- 背景: #2C1810 (濃い茶色)
- 平原タイル: #4CAF50 (緑)
- 町タイル: #8D6E63 (茶色)
- 大都市タイル: #757575 (灰色)
- UI背景: #3E2723 (ダークブラウン)
- テキスト: #FFF8E1 (クリーム色)

### 3.3 フォント
- メインフォント: 'Noto Sans JP'
- 数値表示: 'Roboto Mono'
- タイトル: カスタム中世風フォント

## 4. データ仕様

### 4.1 マップデータ
```json
{
  "stage": 1,
  "name": "商業都市への道",
  "size": { "width": 10, "height": 10 },
  "tiles": [
    {
      "x": 0, "y": 0,
      "type": "plains",
      "shop": null
    },
    {
      "x": 1, "y": 0,
      "type": "town",
      "shop": {
        "name": "露店",
        "items": ["薬草", "パン"]
      }
    }
  ]
}
```

### 4.2 キャラクターデータ
```json
{
  "id": "player_merchant",
  "name": "行商人",
  "class": "merchant",
  "level": 1,
  "stats": {
    "hp": 100,
    "attack": 10,
    "defense": 5,
    "negotiation": 15
  }
}
```

## 5. 開発マイルストーン

### M1: MVP版 (2週間)
- 基本的なボードマップ表示
- サイコロによる移動
- 簡易商談バトル

### M2: α版 (1ヶ月)
- 3ステージ実装
- キャラクター成長要素
- セーブ/ロード機能

### M3: β版 (2ヶ月)
- 全10ステージ
- BGM/SE実装
- バランス調整

### M4: リリース版 (3ヶ月)
- バグ修正
- パフォーマンス最適化
- ユーザーテスト反映

## 6. リスク管理

### 6.1 技術的リスク
- **ブラウザ互換性**: Polyfill使用で対応
- **パフォーマンス**: Canvas最適化、遅延読み込み
- **セーブデータ破損**: バックアップ機能実装

### 6.2 UXリスク
- **操作性**: チュートリアル実装
- **難易度**: 難易度選択機能
- **読み込み時間**: プログレスバー表示

## 7. 成功指標

### 7.1 技術指標
- Lighthouse スコア 90以上
- エラー率 0.1%以下
- 平均セッション時間 20分以上

### 7.2 ユーザー指標
- チュートリアル完了率 80%以上
- 1ステージクリア率 70%以上
- リテンション率 (翌日) 40%以上